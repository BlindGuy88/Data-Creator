<div ng-app="dummy_ang_module" ng-controller="CodeController">
    <div class="top-part">
        <div class='header'>
          Dummy Data Generator
        </div>
        <div class="options" >
          <%= link_to "C", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('C')"}  %>
          <%= link_to "SQL", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('SQL')"}  %>
          <%= link_to "C++", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('C++')"}  %>
          <%= link_to "C#", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('C#')"}  %>
          <%= link_to "Pascal", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('Pascal')"}  %>
          <%= link_to "Java", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('Java')"}  %>
          <%= link_to "Ruby", "", :class=>"option_language", :data => {"ng-click" => "change_code_type('Ruby')"}  %>
          <%= link_to "Python", "", :class=>"option_language" , :data => {"ng-click" => "change_code_type('Python')"} %>
        </div>
    </div>

    <div class="top-part">
        <div class="code_structure" >
           <div>
            <%= link_to "Create your own class", ""  %>
             <div class="clear"></div>
                <div class="codemirror_container">
                <%= text_area_tag :text,
                  " public Class exampleClass \n
                  {\n
                    public string ArtistName {get; set;}\n
                    public string AlbumName {get; set; }\n
                    public int AlbumYear{get;set;}\n
                    public int TrackCount{get;set;}\n
                  }", rows:10, cols:97, :code_mirror => "C", :id => "mytextarea", "ng-model" => "raw_code" %>
                </div>
            </div>
           <div class="button_container">
             <%= button_tag "Generate","ng-click" => "generate_data()", :onClick => "alert('result show when this click');$('.result_hidden').show()", :class=>"button_gray" %>
           </div>
        </div>
    </div>
    <div class="clear"></div>
    <div class="bottom-part">
        <div class="result_hidden">
            <div class="data_option">
              Data Count <%= text_field_tag "value",100 , :class => "data_count","ng-model" => "data_count_number" %>
              <%= link_to "Close Option X", "",:class => "close_link","ng-click" => "generate_field_option()",
              "data-target-url" => "get_field" %>

              <div class="field_option nav-collapse" id="field_option">
                <div ng-repeat="class in classes">
                  <div ng-repeat="class in classes">
                    <div class="field_class">{{class.name}}</div>
                    <ul ng-repeat="property in class.properties">
                      <li>
                        <span>{{property.name}} {{property.type}} {{property.theme}}</span>
                        <span>

                          <select ui-select2="{containerCssClass:'optionType',placeholder:'insert type',minimumResultsForSearch:-1}"
                                  ng-model="property.type"
                                  ng-change="change_theme(property)"
                                  ng-required="true">
                            <option ng-repeat="option in option_type" value="{{option}}">{{option}}</option>
                          </select>
                        </span>
                        <span> <%= text_field_tag "value",nil ,"ng-model"=>"property.length"%> </span>
                        <span>
                          <select ui-select2="{containerCssClass:'optionType',placeholder:'insert theme',minimumResultsForSearch:-1}"
                                  class="optionType"
                                  ng-model="property.theme"
                                  ng-required="true">
                            <optgroup ng-repeat="(type, themes) in property.instance_theme" label={{type}}>
                              <option ng-repeat="theme in themes">{{theme}}</option>
                            </optgroup>
                          </select>
                        </span>
                      </li>
                    </ul>
                  </div>
                  <%= button_tag "Generate","ng-click" => "generate_data_with_theme()", :class=>"button_gray button_container", "data-target-url" => "generate_data_with_theme" %>
                </div>

              </div>
            </div>
            <div class="clear"></div>
            <div class="result_generated">
              <!--<div class="result_option">-->
                <!--| <%= link_to "Copy to clipboard", "" %> |-->
                <!--| <%= link_to "Download file", "" %> |-->
              <!--</div>-->
              <br>
              <div class="clear"> </div>
              <div class="results">
              <pre>{{dummy_data_for_user}}</pre>
              </div>
              <div class="button_container">
              <%= button_tag "Copy to Clipboard", :onClick => "$('pre').select()", :class=>"button_gray" %>
              <%= button_tag "Download", :onClick => "this.select()", :class=>"button_white" %>
              </div>
            </div>
       </div>

      <!--put the selection here-->
      <select style="display: none;" optionTheme="" >
        <% @theme.each do |key,value| %>
            <optgroup label="<%= key %>">
              <% value.each do |theme|%>
                  <option> <%= theme %> </option>
              <% end %>
            </optgroup>
        <%end%>
      </select>



    </div>
</div>




<script type="text/javascript">
        //$(".result_hidden").hide();
</script>